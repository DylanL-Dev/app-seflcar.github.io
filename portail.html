<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- En-tête -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="html/css/style.css" />
    <link
      rel="stylesheet"
      href="html/css/node_modules/normalize.css/normalize.css"
    />
    <script
      defer
      src="https://kit.fontawesome.com/79857fa36d.js"
      crossorigin="anonymous"
    ></script>

    <title>Self-Care</title>
  </head>
  <body>
    <!-- En-tête -->
    <header>
      <!-- Profil patient -->
      <section>
        <div id="container_profil">
          <div id="profilePictureContainer">
            <label for="profilePictureInput" id="uploadPictureBtn">
              <img
                id="profilePicture"
                src="html/assets/icone/add-user.webp"
                alt="photo de profil"
              />
            </label>
            <input type="file" id="profilePictureInput" accept="image/*" />
          </div>
          <section id="patientPortalSection">
            <div class="container_user">
              <h1 class="name"></h1>
              <p class="category">Patient</p>
            </div>
          </section>

          <div class="container_notification clignote" id="cloche">
            <i class="fa-solid fa-bell"></i>
            <div class="bg_bell"></div>
            <div class="min_cercle"></div>
          </div>
          <div class="notification-overlay" id="notificationOverlay">
            <!-- Overlay de notification -->
            <div class="notification-bubble" id="notificationBubble">
              <p></p>
              <p>Bonjour ! Voici quelques informations importantes :</p>

              <ol>
                <li>
                  Vous pouvez modifier votre état émotionnel à tout moment de la
                  journée.
                </li>
                <li>
                  Votre état émotionnel sera enregistré localement à partir de
                  00h00.
                </li>
                <li>
                  Vous aurez un suivi de vos émotions sur un mois avec notre
                  graphique mis à jour quotidiennement.
                </li>
                <li>
                  Vous pourrez visualiser votre taux émotionnel au quotidien.
                </li>
                <li>
                  Vos informations sont stockées localement dans votre
                  navigateur, en
                  <a
                    href="https://www.journaldunet.com/web-tech/developpeur/1100751-web-storage-stockage-des-donnees-dans-le-navigateur/"
                  >
                    <span class="link">"localStorage"</span>
                  </a>
                  et aucune donnée personnelle n'est collectée.
                </li>
                <li>
                  Si vous supprimez l'historique ou utilisez plusieurs profils
                  depuis un autre périphérique ou navigateur, les données seront
                  réinitialisées par défaut.
                </li>
              </ol>
              <span class="close-button">&times;</span>
            </div>
          </div>
        </div>
      </section>
      <!-- End Profil patient -->

      <!-- Mood -->

      <section>
        <div class="title">
          <h2 id="moodTitle">Comment vous sentez-vous aujourd'hui ?</h2>
        </div>
        <!-- Section d'humeur -->
        <div class="container_mood" onclick="window.location.reload();">
          <button id="btn_mood" onclick="saveMoodAndUpdatePage('Furieux');">
            <div class="cirle_mood">
              <img src="html/assets/icone/angry.webp" alt="emoji en colère" />
            </div>
            <div class="nav_header">
              <ul>
                <li>Furieux</li>
              </ul>
            </div>
          </button>
          <button id="btn_mood" onclick="saveMoodAndUpdatePage('Déprimé');">
            <div class="cirle_mood">
              <img
                src="html/assets/icone/Sad_Face_Emoji.webp"
                alt="emoji triste"
              />
            </div>
            <div class="nav_header">
              <ul>
                <li>Déprimé</li>
              </ul>
            </div>
          </button>
          <button id="btn_mood" onclick="saveMoodAndUpdatePage('Fatigué');">
            <div class="cirle_mood">
              <img
                src="html/assets/icone/yawning-face_1f971.webp"
                alt="emoji fatigué"
              />
            </div>
            <div class="nav_header">
              <ul>
                <li>Fatigué</li>
              </ul>
            </div>
          </button>
          <button id="btn_mood" onclick="saveMoodAndUpdatePage('Indifférent');">
            <div class="cirle_mood">
              <img
                src="html/assets/icone/Neutral_Face_Emoji.webp"
                alt="emoji indifférent"
              />
            </div>
            <div class="nav_header">
              <ul>
                <li>Indiffé...</li>
              </ul>
            </div>
          </button>
          <button id="btn_mood" onclick="saveMoodAndUpdatePage('Heureux');">
            <div class="cirle_mood">
              <img
                src="html/assets/icone/Party_Face_Emoji.webp"
                alt="emoji heureux"
              />
            </div>
            <div class="nav_header">
              <ul>
                <li>Heureux</li>
              </ul>
            </div>
          </button>
        </div>
      </section>
      <!-- End Mood -->
    </header>

    <main>
      <!-- Section des prochains rendez-vous -->
      <section>
        <div class="container_appontment">
          <h2>prochain rendez-vous</h2>
          <div class="cards">
            <div class="conatainer_date">
              <div class="date_appontment">
                <h3>28</h3>
                <p>Déc</p>
              </div>
            </div>
            <div class="container_hour">
              <div class="hour_appontment">
                <h3>14:30</h3>
                <p>Leila Jaques</p>
              </div>
              <a href="#">
                <div>
                  <i class="fa-solid fa-ellipsis"></i>
                </div>
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- Section des soins personnels -->
      <section>
        <div class="container_self">
          <i class="fa-solid fa-minus fa-2xl barre" id="bars"></i>
          <i class="fa-solid fa-chevron-down" id="chevron"></i>
          <h3>Soins personnels</h3>
          <div class="nav_main">
            <ul>
              <li>Pratique</li>
              <li>Vidéo</li>
              <li>Livres</li>
              <li>Tests</li>
            </ul>
          </div>
          <div class="container_card">
            <div class="cards_self_car_green">
              <div class="bg_white">
                <img
                  src="html/assets/icone/person-in-lotus-position-500x500.webp"
                  alt="personne en lotus position"
                />
              </div>
              <div class="title_self_car">
                <h3>Meditation</h3>
                <p>30 min</p>
              </div>
            </div>
            <div class="cards_self_car_green_Lightness">
              <div class="bg_white">
                <img
                  src="html/assets/icone/bed-500x500.webp"
                  alt="personne en lotus position"
                />
              </div>
              <div class="title_self_car">
                <h3>Réveillez-vous</h3>
                <p>30 min</p>
              </div>
            </div>
            <div class="cards_self_car_blue">
              <div class="bg_white">
                <img
                  src="html/assets/icone/Praying Emoji [Free Download iPhone Emojis].webp"
                  alt="personne en lotus position"
                />
              </div>
              <div class="title_self_car">
                <h3>Objectif positif</h3>
                <p>30 min</p>
              </div>
            </div>
            <div class="cards_self_car_blue">
              <div class="bg_white">
                <img
                  src="html/assets/icone/face-exhaling-500x500.webp"
                  alt="personne en lotus position"
                />
              </div>
              <div class="title_self_car">
                <h3>Respiration</h3>
                <p>30 min</p>
              </div>
            </div>
            <div class="cards_self_car_green">
              <div class="bg_white">
                <img
                  src="html/assets/icone/eye-500x500.webp"
                  alt="personne en lotus position"
                />
              </div>
              <div class="title_self_car">
                <h3>Conscience</h3>
                <p>30 min</p>
              </div>
            </div>
            <div class="cards_self_car_green_Lightness">
              <div class="bg_white">
                <img
                  src="html/assets/icone/paint-emoji-png-4119290.webp"
                  alt="personne en lotus position"
                />
              </div>
              <div class="title_self_car">
                <h3>Créativité</h3>
                <p>30 min</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <!-- Pied de page -->
      <nav id="nav_footer">
        <div class="container_nav">
          <div class="navigation" id="html_scroll_nav">
            <a href="#container_profil" class="icon_link"
              ><i class="fa-solid fa-house"></i
            ></a>
            <a href="html/qrcode.html" class="icon_link"
              ><i class="fa-solid fa-qrcode"></i
            ></a>
            <div class="cercle_nav">
              <a href="#" class="icon_link">
                <i class="fa-solid fa-plus"></i>
              </a>
            </div>
            <a href="html/graphique.html"  class="icon_link"
              ><i class="fa-solid fa-chart-pie"></i
            ></a>
            <a href="#" class="icon_link"><i class="fa-solid fa-gear"></i></a>
          </div>
        </div>
      </nav>
    </footer>
    <script defer src="script.js"></script>
    <script defer>
      window.addEventListener("load", function () {
        document.getElementById("moodTitle").scrollIntoView();
      });
    </script>
    <script defer>
      document.addEventListener("DOMContentLoaded", function () {
        displayEntries();
        updateEmotionChart();
      });
    </script>
    <script defer>
      document.addEventListener("DOMContentLoaded", function () {
        initializePatientApp();
      });
    </script>

    <script defer>
      document.addEventListener("DOMContentLoaded", function () {
        const cloche = document.getElementById("cloche");
        const notificationOverlay = document.getElementById(
          "notificationOverlay"
        );
        const notificationBubble =
          document.getElementById("notificationBubble");
        const closeButton = document.querySelector(".close-button");

        cloche.addEventListener("click", function () {
          notificationOverlay.style.display = "block";
        });

        closeButton.addEventListener("click", function () {
          notificationOverlay.style.display = "none";
        });
      });

      // Gestion de la notification cloche
      const cloche = document.getElementById("cloche");
      const notificationOverlay = document.getElementById(
        "notificationOverlay"
      );

      // Vérifie si la notification a déjà été affichée aujourd'hui
      const isNotificationDisplayed = localStorage.getItem(
        "notificationDisplayed"
      );

      // Affiche la notification si elle n'a pas été affichée auparavant
      if (!isNotificationDisplayed) {
        displayNotification();
      }

      // Fonction pour afficher la notification
      function displayNotification() {
        notificationOverlay.style.display = "block";
        cloche.classList.add("clignote");

        // Enregistre que la notification a été affichée
        localStorage.setItem("notificationDisplayed", true);
      }

      // Ferme la notification
      function closeNotification() {
        notificationOverlay.style.display = "none";
        cloche.classList.remove("clignote");
      }

      // Gère le clic sur la cloche
      cloche.addEventListener("click", function () {
        if (notificationOverlay.style.display === "none") {
          displayNotification();
        } else {
          closeNotification();
        }
      });

      // Fermeture de la notification avec la croix
      const closeButton = document.querySelector(".close-button");
      closeButton.addEventListener("click", function () {
        closeNotification();
      });
    </script>
  </body>
</html>
